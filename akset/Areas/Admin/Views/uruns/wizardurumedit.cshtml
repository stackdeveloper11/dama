@model akset.data.urun
@using System.Data.Entity
@{
    ViewBag.Title = "Ürün Ekleme Sihirbazı";
}
<style>
    .form-control {
        padding: 0 5px !important;
        border: 1px solid #ccc !important;
    }

    button.btn-default {
        padding: 12px 15px !important;
        background: #2b72bb !important;
    }
</style>
<style>
    .imge:hover {
        /*opacity:.5 !important;*/
        cursor: pointer;
    }

    .select2-container {
        padding: 0 !important;
    }

    .stepwizard-step p {
        margin-top: 10px;
    }

    .stepwizard-row {
        display: table-row;
    }

    .stepwizard {
        display: table;
        width: 50%;
        position: relative;
    }

    .stepwizard-step button[disabled] {
        opacity: 1 !important;
        filter: alpha(opacity=100) !important;
    }

    .stepwizard-row:before {
        top: 14px;
        bottom: 0;
        position: absolute;
        content: " ";
        width: 100%;
        height: 1px;
        background-color: #ccc;
        z-order: 0;
    }

    .thumbnail {
        margin: 0 10px 10px 0 !important;
        position: relative;
    }

    .stepwizard-step {
        display: table-cell;
        text-align: center;
        position: relative;
    }

    .btn-circle {
        width: 30px;
        height: 30px;
        text-align: center;
        padding: 6px 0;
        font-size: 12px;
        line-height: 1.428571429;
        border-radius: 15px;
    }

    .btn.disabled, .btn[disabled], fieldset[disabled] .btn {
        opacity: 1 !important;
    }

    .srk {
        position: absolute;
        bottom: -1px;
        right: -1px;
        border: 1px solid #adadad;
        background: white;
        cursor: move;
        padding: 0px 3px 0px 3px;
    }

    .stepwizard {
        width: 100% !important;
    }

    #result li {
        counter-increment: mega-step;
        height: 142px;
        display: inline-table;
        margin-left: 27px !important;
    }

        #result li:before {
            /* Increment the value of section counter by 1 */
            content: counter( mega-step);
            border: 1px solid #ddd;
            padding: 2px;
            position: absolute;
            background: white;
            top: -1px;
            left: -1px;
            color: #adadad;
            z-index: 999;
        }

    .thumbnail a {
        display: table-cell;
        vertical-align: middle;
        text-align: center;
        position: relative;
    }

    .imge {
        max-height: 132px;
    }

    .btn-group-xs > .btn, .btn-xs {
        padding: 1px !important;
    }
</style>
<div id="content">
    <section id="widget-grid" class="" style="padding:0">
        <!-- row -->
        <div class="row">
            <!-- NEW WIDGET START -->
            <article class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <!-- Widget ID (each widget will need unique ID)-->
                <div class="jarviswidget jarviswidget-color-darken" id="wid-id-0" data-widget-editbutton="false">
                    <header>
                        <span class="widget-icon"> <i class="fa fa-table"></i> </span>
                        <h2>Ürün Ekleme Sihirbazı</h2>
                    </header>
                    <div>
                        <div class="widget-body" style="padding: 10px;">
                            <div class="btn btn-success nextBtn pull-right" onclick="sifirlahi()">Kaydet</div>
                            <div class="">
                                <div class="stepwizard col-md-12" style="padding:0">
                                    <div class="stepwizard-row setup-panel">
                                        <div class="stepwizard-step">
                                            <a href="#step-1" type="button" class="btn btn-primary btn-circle">1</a>
                                            <p>Kategori Seçimi</p>
                                        </div>
                                        <div class="stepwizard-step">
                                            <a href="#step-2" type="button" class="btn btn-default btn-circle ikide">2</a>
                                            <p>Filitre Seçimi</p>
                                        </div>

                                        <div class="stepwizard-step">
                                            <a href="#step-3" type="button" class="btn btn-default btn-circle">3</a>
                                            <p>Ürün Resimleri</p>
                                        </div>
                                        <div class="stepwizard-step">
                                            <a href="#step-4" type="button" class="btn btn-default btn-circle">4</a>
                                            <p>Ürün Detayı</p>
                                        </div>
                                    </div>
                                </div>
                                <form role="form" action="/admin/uruns/wizardurumedit/@Model.Id" method="post" enctype="multipart/form-data">
                                    @Html.AntiForgeryToken()
                                    @Html.ValidationSummary("", new { @class = "text-danger" })
                                    <input type="hidden" name="id" value="@Model.Id" />
                                    <table class="model-state">
                                        @foreach (var item in ViewContext.ViewData.ModelState)
                                        {
                                            if (item.Value.Errors.Any())
                                            {
                                                <tr>
                                                    <td><b>@item.Key</b></td>
                                                    <td>@((item.Value == null || item.Value.Value == null) ? "<null>" : item.Value.Value.RawValue)</td>
                                                    <td>@(string.Join("; ", item.Value.Errors.Select(x => x.ErrorMessage)))</td>
                                                </tr>
                                            }
                                        }
                                    </table>
                                    <input type="hidden" name="sira" value="1000" />
                                    <input type="hidden" name="tarih" value="@DateTime.Now.ToString("yyyy-MM-dd")" />
                                    <input type="hidden" id="resim" name="resim" value="@Model.resim" />
                                    <div class="row setup-content" id="step-1">
                                        <div class="col-md-12">
                                            <div class="panel panel-primary">
                                                <div class="panel-heading">
                                                    <h3 class="panel-title">Kategori Seçimi</h3>
                                                </div>
                                                <div class="panel-body">
                                                    <div class="form-group">
                                                        <div class="col-xs-12" style="padding:0">
                                                            @Html.DropDownList("KategoriId", null, htmlAttributes: new { @class = "form-control" })
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <button class="btn btn-primary nextBtn pull-right" type="button">Sonraki</button>
                                        </div>
                                    </div>
                                    <div class="row setup-content" id="step-2">
                                        <div class="col-md-12">
                                            <div class="panel panel-primary">
                                                <div class="panel-heading">
                                                    <h3 class="panel-title">Filitre Seçimi</h3>
                                                </div>
                                                <div class="panel-body filtreleri">
                                                    <div class="form-group">
                                                        <div class="col-xs-12 buraga" style="padding:0">

                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <button class="btn btn-primary prevBtn pull-left" type="button">Önceki</button>
                                            <button class="btn btn-primary nextBtn pull-right" type="button">Sonraki</button>
                                        </div>
                                    </div>
                                    <div class="row setup-content" id="step-3">
                                        <div class="col-md-12">
                                            <div class="panel panel-primary">
                                                <div class="panel-heading">
                                                    <h3 class="panel-title">Ürün Resimleri</h3>
                                                </div>
                                                <div class="panel-body filtreleri">
                                                    <h3 class="hidden text-center" id="beklex">LÜTFEN BEKLEYİNİZ!...</h3>
                                                    <div class="form-group">
                                                        <div class="row">
                                                            <div class="col-xs-12" style="padding:0">
                                                                <div class="bootstrap-filestyle input-group" style="margin-left:10px" onclick='$("#rrtt").attr("src", "/admin/uruns/vidolar/"+Math.floor((Math.random() * 9999) + 1));' data-toggle="modal" data-target="#exampleModal">
                                                                    <span class="group-span-filestyle input-group-btn" tabindex="0">
                                                                        <label for="vdosec" class="btn btn-success">
                                                                            <span style="margin-right: 3px;" class="icon-span-filestyle glyphicon glyphicon-folder-open"></span>
                                                                            <span class="buttonText">Video Hazırla</span>
                                                                        </label>
                                                                    </span>
                                                                </div>
                                                                <!-- Modal -->
                                                                <div class="modal fade" id="exampleModal" tabindex="-1" style="height: 262px;overflow: hidden;margin: 47px auto;width: 360px;" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                                                    <div class="modal-dialog" role="document">
                                                                        <div class="modal-content">
                                                                            <div class="modal-header">
                                                                                <h5 class="modal-title" id="exampleModalLabel">Videolar</h5>
                                                                            </div>
                                                                            <div class="modal-body">
                                                                                <iframe src="/admin/uruns/vidolar" id="rrtt" style="border:0;height:123px" frameborder="0"></iframe>
                                                                            </div>
                                                                            <div class="modal-footer">
                                                                                <button type="button" class="btn btn-primary" data-dismiss="modal">Kapat</button>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <style>
                                                                    #step-3 > div > div > div.panel-body.filtreleri > div.form-group > div > div:nth-child(2) > input {
                                                                        display: none;
                                                                    }

                                                                    .bootstrap-filestyle.input-group {
                                                                        float: left;
                                                                        width: 100px;
                                                                    }
                                                                </style>

                                                                <input type='file' id="imgInp" class="filestyle" data-buttonText="Resim & Video Seç" data-buttonName="btn-primary" multiple="" accept="image/*,video/*" style="float:left" />
                                                                <div class="col-xs-12">
                                                                    <ul class="list-inline" style="margin-top:10px" id="result">
                                                                        @{
                                                                            string v1i = "";
                                                                            string v2i = "";
                                                                            string kpki = "";
                                                                        }
                                                                        @if (!string.IsNullOrEmpty(Model.resim))
                                                                        {
                                                                            if (Directory.Exists(Server.MapPath("~/urunresimleri")))
                                                                            {
                                                                                int ii = 0;
                                                                                foreach (var files in Directory.GetFiles(Server.MapPath("~/urunresimleri/" + Model.resim)))
                                                                                {
                                                                                    ii++;
                                                                                    FileInfo info = new FileInfo(files);
                                                                                    var fileName = Path.GetFileName(info.FullName);
                                                                                    if (fileName.Contains("v1-"))
                                                                                    {
                                                                                        v1i = ii.ToString();
                                                                                    }
                                                                                    if (fileName.Contains("v2-"))
                                                                                    {
                                                                                        v2i = ii.ToString();
                                                                                    }
                                                                                    if (fileName.Contains("kpk-"))
                                                                                    {
                                                                                        kpki = ii.ToString();
                                                                                    }
                                                                                    <li class="thumbnail" style="width: 100px; vertical-align: top;" draggable="false">
                                                                                        <a href="#jj" draggable="false">
                                                                                            @if (fileName.Contains(".mp4"))
                                                                                            {
                                                                                                <video controls="" style="width:100%" id="f-@ii" class="imge" src="@akset.helper.Genel.base64video(Server.MapPath("/urunresimleri/"+Model.resim+"/"+fileName))"></video>
                                                                                            }
                                                                                            else
                                                                                            {
                                                                                                <img style="width:100%" id="f-@ii" class="imge" onclick="showimg('m-@ii')" src="@akset.helper.Genel.base64resim(Server.MapPath("/urunresimleri/"+Model.resim+"/"+fileName))" draggable="false" />
                                                                                                <img style="width:100px;height:100px;display:none" id="m-@ii" onclick="showimg('m-@ii');" class="thumbnail imgx" src="@akset.helper.Genel.base64resim(Server.MapPath("/urunresimleri/"+Model.resim+"/"+fileName))" draggable="false" />
                                                                                            }
                                                                                        </a>
                                                                                        <div class="srk">
                                                                                            <i class="fa fa-crosshairs"></i>
                                                                                        </div>
                                                                                        <div class="btn-group-xs btn-group btn-group-vertical" style="position: absolute;left: -25px;bottom: 0;">
                                                                         
                                                                                            <div class="tv-@ii btn btn-@string.Concat(fileName.Contains("v1-")?"primary":"success") v1" onclick='$(".v1").removeClass("btn-primary").addClass("btn-success");$(this).removeClass("btn-success").addClass("btn-primary");$("#v1").val("@ii");'>
                                                                                                V1
                                                                                            </div>
                                                                                            <div class="tv-@ii btn btn-@string.Concat(fileName.Contains("v2-")?"primary":"success") v2" onclick="$('.v2').removeClass('btn-primary').addClass('btn-success');$(this).removeClass('btn-success').addClass('btn-primary');$('#v2').val('@ii');">
                                                                                                V2
                                                                                            </div>
                                                                                            <div onclick="$('.kpk').removeClass('btn-primary').addClass('btn-warning');$(this).removeClass('btn-warning').addClass('btn-primary');$('#kpk').val('@ii')" class="btn btn-@string.Concat(fileName.Contains("kpk-")?"primary":"warning") kpk ty-@ii">
                                                                                                Kpk
                                                                                            </div>
                                                                                            <div class="btn btn-danger btn-xs" onclick="$(this).parent().parent().remove();">
                                                                                                Sil
                                                                                            </div>
                                                                                        </div>
                                                                                    </li>
                                                                                }
                                                                            }
                                                                        }
                                                                    </ul>

                                                                </div>
                                                       
                                                            </div>
                                                            <div class="col-xs-12">
                                                                <ul class="list-inline">
                                                                    <li class="list-inline-item">
                                                                        <a href="#33" class="btn btn-danger" onclick="$('#kpk').val(''); $('.kpk').addClass('btn-warning').removeClass('btn-primary');">
                                                                            Kapak Sil
                                                                        </a>
                                                                    </li>
                                                                    <li class="list-inline-item">
                                                                        <a href="#33" class="btn btn-danger" onclick="$('#v1').val(''); $('.v1').addClass('btn-success').removeClass('btn-primary');">
                                                                            Vitrin 1 Sil
                                                                        </a>
                                                                    </li>
                                                                    <li class="list-inline-item">
                                                                        <a href="#33" class="btn btn-danger" onclick="$('#v2').val(''); $('.v2').addClass('btn-success').removeClass('btn-primary');">
                                                                            Vitrin 2 Sil
                                                                        </a>
                                                                    </li>
                                                                </ul>
                                                            </div>
                                                        </div>
                                              

                                                    </div>

                                                    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModal-label">
                                                        <div class="modal-dialog modal-lg" role="document">
                                                            <div class="modal-content">
                                                                <div class="modal-header">
                                                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                                                    <h4 class="modal-title" id="myModal-label">Resim Editörü</h4>
                                                                </div>
                                                                <div class="modal-body" style="padding:0">
                                                                    <!-- Content -->
                                                                    <div>
                                                                        <div class="row">
                                                                            <div class="col-md-12">
                                                                                <div class="img-container">
                                                                                    <img id="image" src="/content/images/picture.jpg" alt="Picture">
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="row">
                                                                            <div class="col-md-12 docs-buttons" style="padding:15px;text-align:center">
                                                                                @*<h3>Toolbar:</h3>*@
                                                                                <div class="btn-group">
                                                                                    <button type="button" class="btn btn-primary" data-method="setDragMode" data-option="move" title="Sürükle">
                                                                                        <span class="docs-tooltip" data-toggle="tooltip" data-animation="false" title="Sürükle">
                                                                                            <span class="fa fa-arrows"></span>
                                                                                        </span>
                                                                                    </button>
                                                                                    <button type="button" class="btn btn-primary" data-method="setDragMode" data-option="crop" title="Kırp">
                                                                                        <span class="docs-tooltip" data-toggle="tooltip" data-animation="false" title="Kırp">
                                                                                            <span class="fa fa-crop"></span>
                                                                                        </span>
                                                                                    </button>
                                                                                </div>
                                                                                <div class="btn-group">
                                                                                    <button type="button" class="btn btn-primary" data-method="zoom" data-option="0.1" title="Büyült">
                                                                                        <span class="docs-tooltip" data-toggle="tooltip" data-animation="false" title="Büyült">
                                                                                            <span class="fa fa-search-plus"></span>
                                                                                        </span>
                                                                                    </button>
                                                                                    <button type="button" class="btn btn-primary" data-method="zoom" data-option="-0.1" title="Küçült">
                                                                                        <span class="docs-tooltip" data-toggle="tooltip" data-animation="false" title="Küçült">
                                                                                            <span class="fa fa-search-minus"></span>
                                                                                        </span>
                                                                                    </button>
                                                                                </div>
                                                                                <div class="btn-group">
                                                                                    <button type="button" class="btn btn-primary" data-method="move" data-option="-10" data-second-option="0" title="Sola Sürükle">
                                                                                        <span class="docs-tooltip" data-toggle="tooltip" data-animation="false" title="Sola Sürükle">
                                                                                            <span class="fa fa-arrow-left"></span>
                                                                                        </span>
                                                                                    </button>
                                                                                    <button type="button" class="btn btn-primary" data-method="move" data-option="10" data-second-option="0" title="Sağa Sürükle">
                                                                                        <span class="docs-tooltip" data-toggle="tooltip" data-animation="false" title="Sağa Sürükle">
                                                                                            <span class="fa fa-arrow-right"></span>
                                                                                        </span>
                                                                                    </button>
                                                                                    <button type="button" class="btn btn-primary" data-method="move" data-option="0" data-second-option="-10" title="Move Up">
                                                                                        <span class="docs-tooltip" data-toggle="tooltip" data-animation="false" title="Yukarı Sürükle">
                                                                                            <span class="fa fa-arrow-up"></span>
                                                                                        </span>
                                                                                    </button>
                                                                                    <button type="button" class="btn btn-primary" data-method="move" data-option="0" data-second-option="10" title="Move Down">
                                                                                        <span class="docs-tooltip" data-toggle="tooltip" data-animation="false" title="Aşağı Sürükle">
                                                                                            <span class="fa fa-arrow-down"></span>
                                                                                        </span>
                                                                                    </button>
                                                                                </div>
                                                                                <div class="btn-group">
                                                                                    <button type="button" class="btn btn-primary" data-method="rotate" data-option="-45" title="Rotate Left">
                                                                                        <span class="docs-tooltip" data-toggle="tooltip" data-animation="false" title="45 derece Sola Dönder">
                                                                                            <span class="fa fa-rotate-left"></span>
                                                                                        </span>
                                                                                    </button>
                                                                                    <button type="button" class="btn btn-primary" data-method="rotate" data-option="45" title="Rotate Right">
                                                                                        <span class="docs-tooltip" data-toggle="tooltip" data-animation="false" title="45 derece Sağa Dönder">
                                                                                            <span class="fa fa-rotate-right"></span>
                                                                                        </span>
                                                                                    </button>
                                                                                </div>
                                                                                <div class="btn-group">
                                                                                    <button type="button" class="btn btn-primary" data-method="scaleX" data-option="-1" title="Flip Horizontal">
                                                                                        <span class="docs-tooltip" data-toggle="tooltip" data-animation="false" title="Yatay Çevir">
                                                                                            <span class="fa fa-arrows-h"></span>
                                                                                        </span>
                                                                                    </button>
                                                                                    <button type="button" class="btn btn-primary" data-method="scaleY" data-option="-1" title="Flip Vertical">
                                                                                        <span class="docs-tooltip" data-toggle="tooltip" data-animation="false" title="Dikey Çevir">
                                                                                            <span class="fa fa-arrows-v"></span>
                                                                                        </span>
                                                                                    </button>
                                                                                </div>
                                                                                <div class="btn-group">
                                                                                    <button type="button" class="btn btn-primary" data-method="crop" title="Crop">
                                                                                        <span class="docs-tooltip" data-toggle="tooltip" data-animation="false" title="Kırp">
                                                                                            <span class="fa fa-check"></span>
                                                                                        </span>
                                                                                    </button>
                                                                                    <button type="button" class="btn btn-primary" data-method="clear" title="Clear">
                                                                                        <span class="docs-tooltip" data-toggle="tooltip" data-animation="false" title="Temizle">
                                                                                            <span class="fa fa-remove"></span>
                                                                                        </span>
                                                                                    </button>
                                                                                </div>

                                                                                <div class="btn-group">
                                                                                    <button type="button" class="btn btn-primary" data-method="reset" title="Reset">
                                                                                        <span class="docs-tooltip" data-toggle="tooltip" data-animation="false" title="Sıfırla">
                                                                                            <span class="fa fa-refresh"></span>
                                                                                        </span>
                                                                                    </button>
                                                                                    <label class="btn btn-primary btn-upload" for="inputImage" title="Upload image file">
                                                                                        <input type="file" class="sr-only" id="inputImage" name="file" accept=".jpg,.jpeg,.png,.gif,.bmp,.tiff">
                                                                                        <span class="docs-tooltip" data-toggle="tooltip" data-animation="false" title="Yeni Resim Yükle">
                                                                                            <span class="fa fa-upload"></span>
                                                                                        </span>
                                                                                    </label>

                                                                                </div>

                                                                                <div class="btn-group d-flex flex-nowrap" data-toggle="buttons">
                                                                                    <label class="btn btn-primary active">
                                                                                        <input type="radio" class="sr-only" id="aspectRatio0" name="aspectRatio" value="1.7777777777777777">
                                                                                        <span class="docs-tooltip" data-toggle="tooltip" data-animation="false" title="Oranla: 16 / 9">
                                                                                            16:9
                                                                                        </span>
                                                                                    </label>
                                                                                    <label class="btn btn-primary" onclick="$('#image').cropper('setAspectRatio', 1.3333333333333333)">
                                                                                        <input type="radio" class="sr-only" id="aspectRatio1" name="aspectRatio" value="1.3333333333333333">
                                                                                        <span class="docs-tooltip" data-toggle="tooltip" data-animation="false" title="Oranla: 4 / 3">
                                                                                            4:3
                                                                                        </span>
                                                                                    </label>
                                                                                    <label class="btn btn-primary" onclick="$('#image').cropper('setAspectRatio',1)">
                                                                                        <input type="radio" class="sr-only" id="aspectRatio2" name="aspectRatio" value="1">
                                                                                        <span class="docs-tooltip" data-toggle="tooltip" data-animation="false" title="Oranla: 1 / 1">
                                                                                            1:1
                                                                                        </span>
                                                                                    </label>
                                                                                    <label class="btn btn-primary" onclick="$('#image').cropper('setAspectRatio', 0.6666666666666666)">
                                                                                        <input type="radio" class="sr-only" id="aspectRatio3" name="aspectRatio" value="0.6666666666666666">
                                                                                        <span class="docs-tooltip" data-toggle="tooltip" data-animation="false" title="Oranla: 2 / 3">
                                                                                            2:3
                                                                                        </span>
                                                                                    </label>
                                                                                    <label class="btn btn-primary" onclick="$('#image').cropper('setAspectRatio',NaN)">
                                                                                        <input type="radio" class="sr-only" id="aspectRatio4" name="aspectRatio" value="NaN">
                                                                                        <span class="docs-tooltip" data-toggle="tooltip" data-animation="false" title="Serbest">
                                                                                            Serbest
                                                                                        </span>
                                                                                    </label>
                                                                                </div>
                                                                                <div class="btn-group">
                                                                                    <button type="button" class="btn btn-success" data-dismiss="modal" onclick='$("#" + ttt.replace("m", "f")).attr("src", $("#image").cropper("getCroppedCanvas").toDataURL()); '>
                                                                                        <span class="docs-tooltip" data-toggle="tooltip" data-animation="false" title="Düzenle">
                                                                                            Düzenle
                                                                                        </span>
                                                                                    </button>
                                                                                    <button type="button" class="btn btn-danger" data-dismiss="modal" title="Kapat">
                                                                                        <span class="docs-tooltip" data-toggle="tooltip" data-animation="false" title="Kapat">
                                                                                            <span class="fa fa-close"></span> Kapat
                                                                                        </span>
                                                                                    </button>
                                                                                </div>
                                                                                <input type="hidden" name="v1" id="v1" value="@v1i" />
                                                                                <input type="hidden" name="v2" id="v2" value="@v2i" />
                                                                                <input type="hidden" name="kpk" id="kpk" value="@kpki" />
                                                                                <!-- Show the cropped image in modal -->
                                                                                <div class="modal fade docs-cropped" id="getCroppedCanvasModal" aria-hidden="true" aria-labelledby="getCroppedCanvasTitle" role="dialog" tabindex="-1">
                                                                                    <div class="modal-dialog">
                                                                                        <div class="modal-content">
                                                                                            <div class="modal-header">
                                                                                                <h5 class="modal-title" id="getCroppedCanvasTitle">Kırpılan</h5>
                                                                                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                                                                    <span aria-hidden="true">&times;</span>
                                                                                                </button>
                                                                                            </div>
                                                                                            <div class="modal-body"></div>
                                                                                            <div class="modal-footer">
                                                                                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Kapat</button>
                                                                                                <a class="btn btn-primary hidden" id="download" href="javascript:void(0);" download="cropped.jpg">İndir</a>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </div><!-- /.modal -->
                                                                            </div><!-- /.docs-buttons -->
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <button class="btn btn-primary prevBtn pull-left" type="button">Önceki</button>
                                            <button class="btn btn-primary nextBtn pull-right" type="button">Sonraki</button>
                                        </div>
                                    </div>
                                    <div class="row setup-content" id="step-4">
                                        <div class="col-md-12">
                                            <div class="panel panel-primary">
                                                <div class="panel-heading">
                                                    <h3 class="panel-title">Ürün Detayı</h3>
                                                </div>
                                                <div class="panel-body">
                                                    <div class="form-horizontal">
                                                        <div class="col-xs-12" style="padding:0">

                                                            <div class="form-group">
                                                                <label class="control-label col-md-2">Ürün Kodu</label>
                                                                <div class="col-md-10">
                                                                    @Html.EditorFor(model => model.UrunKodu, new { htmlAttributes = new { @class = "form-control" } })
                                                                    @Html.ValidationMessageFor(model => model.UrunKodu, "", new { @class = "text-danger" })
                                                                    <div id="kouyri" class="hidden" style="color:red">Bu Kod daha önce kullanılmıştır.</div>
                                                                </div>
                                                            </div>

                                                            <div class="form-group">
                                                                @Html.LabelFor(model => model.urunbaslik, htmlAttributes: new { @class = "control-label col-md-2" })
                                                                <div class="col-md-10">
                                                                    @Html.EditorFor(model => model.urunbaslik, new { htmlAttributes = new { @class = "form-control" } })
                                                                    @Html.ValidationMessageFor(model => model.urunbaslik, "", new { @class = "text-danger" })
                                                                </div>
                                                            </div>

                                                            <div class="form-group">
                                                                @Html.LabelFor(model => model.urunadi, htmlAttributes: new { @class = "control-label col-md-2" })
                                                                <div class="col-md-10">
                                                                    @Html.EditorFor(model => model.urunadi, new { htmlAttributes = new { @class = "form-control" } })
                                                                    @Html.ValidationMessageFor(model => model.urunadi, "", new { @class = "text-danger" })
                                                                </div>
                                                            </div>


                                                            <div class="form-group">
                                                                <label class="control-label col-md-2">Ürün Linki</label>
                                                                <div class="col-md-10">
                                                                    @Html.EditorFor(model => model.link, new { htmlAttributes = new { @class = "form-control" } })
                                                                    @Html.ValidationMessageFor(model => model.link, "", new { @class = "text-danger" })
                                                                </div>
                                                            </div>
                                                            <div class="form-group">
                                                                <label class="control-label col-md-2" for="durum">Durum</label>
                                                                <div class="col-md-10">
                                                                    <select class="form-control" name="anasayfa">
                                                                        @if (Model.anasayfa == "standart")
                                                                        {
                                                                            <option value="standart" selected="selected">Standart</option>
                                                                        }
                                                                        else
                                                                        {
                                                                            <option value="standart">Standart</option>
                                                                        }
                                                                        @if (Model.anasayfa == "canlimoda")
                                                                        {
                                                                            <option value="canlimoda" selected="selected">Canlı Moda</option>
                                                                        }
                                                                        else
                                                                        {
                                                                            <option value="canlimoda">Canlı Moda</option>
                                                                        }
                                                                        @if (Model.anasayfa == "yeni")
                                                                        {
                                                                            <option value="yeni" selected="selected">Yeni</option>
                                                                        }
                                                                        else
                                                                        {
                                                                            <option value="yeni">Yeni</option>
                                                                        }
                                                                        @if (Model.anasayfa == "coksatan")
                                                                        {
                                                                            <option value="coksatan" selected="selected">Çok Satan</option>
                                                                        }
                                                                        else
                                                                        {
                                                                            <option value="coksatan">Çok Satan</option>
                                                                        }
                                                                        @if (Model.anasayfa == "populer")
                                                                        {
                                                                            <option value="populer" selected="selected">Popülar</option>
                                                                        }
                                                                        else
                                                                        {
                                                                            <option value="populer">Popülar</option>
                                                                        }
                                                                        @if (Model.anasayfa == "indirimli")
                                                                        {
                                                                            <option value="indirimli" selected="selected">İndirimli</option>
                                                                        }
                                                                        else
                                                                        {
                                                                            <option value="indirimli">İndirimli</option>
                                                                        }
                                                                    </select>

                                                                    @Html.ValidationMessageFor(model => model.anasayfa, "", new { @class = "text-danger" })
                                                                </div>
                                                            </div>

                                                            <div class="form-group hidden">
                                                                @Html.LabelFor(model => model.urunkisaaciklama, htmlAttributes: new { @class = "control-label col-md-2" })
                                                                <div class="col-md-10">
                                                                    @Html.EditorFor(model => model.urunkisaaciklama, new { htmlAttributes = new { @class = "form-control" } })
                                                                    @Html.ValidationMessageFor(model => model.urunkisaaciklama, "", new { @class = "text-danger" })
                                                                </div>
                                                            </div>
                                                            <div class="form-group hidden">
                                                                @Html.LabelFor(model => model.urunozellikleri, htmlAttributes: new { @class = "control-label col-md-2" })
                                                                <div class="col-md-10">
                                                                    @Html.EditorFor(model => model.urunozellikleri, new { htmlAttributes = new { @class = "form-control" } })
                                                                    @Html.ValidationMessageFor(model => model.urunozellikleri, "", new { @class = "text-danger" })
                                                                </div>
                                                            </div>

                                                            <div class="form-group">
                                                                <label class="control-label col-md-2">Önerilen</label>
                                                                <div class="col-md-10">
                                                                    <select class="form-control" name="oneri">
                                                                        @if (Model.oneri == "Evet")
                                                                        {
                                                                            <option value="Evet" selected="selected">Evet</option>
                                                                            <option value="Hayır">Hayır</option>
                                                                        }
                                                                        else
                                                                        {
                                                                            <option value="Evet">Evet</option>
                                                                            <option value="Hayır" selected="selected">Hayır</option>
                                                                        }
                                                                    </select>
                                                                    @Html.ValidationMessageFor(model => model.oneri, "", new { @class = "text-danger" })
                                                                </div>
                                                            </div>


                                                            <div class="form-group">
                                                                @Html.LabelFor(model => model.urundetayi, htmlAttributes: new { @class = "control-label col-md-2" })
                                                                <div class="col-md-10">
                                                                    <div Id="summernote"></div>
                                                                    @Html.EditorFor(model => model.urundetayi, new { htmlAttributes = new { @class = "form-control hidden" } })
                                                                    @Html.ValidationMessageFor(model => model.urundetayi, "", new { @class = "text-danger" })
                                                                </div>
                                                            </div>
                                                            <div class="form-group">
                                                                <label class="control-label col-md-2">Etiketler</label>
                                                                <div class="col-md-10">
                                                                    @Html.EditorFor(model => model.etiketler, new { htmlAttributes = new { @class = "form-control" } })
                                                                    @Html.ValidationMessageFor(model => model.etiketler, "", new { @class = "text-danger" })
                                                                </div>
                                                            </div>

                                                            <div class="form-group">
                                                                <label class="control-label col-md-2">Satıştamı</label>
                                                                <div class="col-md-10">
                                                                    <select class="form-control" name="satistami">
                                                                        <option value="Evet" selected="selected">Evet</option>
                                                                        <option value="Hayır">Hayır</option>
                                                                    </select>
                                                                    @Html.ValidationMessageFor(model => model.satistami, "", new { @class = "text-danger" })
                                                                </div>
                                                            </div>

                                                            <div class="form-group">
                                                                <label class="control-label col-md-2">İskonto (%)</label>
                                                                <div class="col-md-10">
                                                                    @Html.EditorFor(model => model.eskifiyat, new { htmlAttributes = new { @class = "form-control" } })
                                                                    @Html.ValidationMessageFor(model => model.eskifiyat, "", new { @class = "text-danger" })
                                                                </div>
                                                            </div>
                                                            <div class="form-group">
                                                                @Html.LabelFor(model => model.fiyat, htmlAttributes: new { @class = "control-label col-md-2" })
                                                                <div class="col-md-10">
                                                                    @Html.EditorFor(model => model.fiyat, new { htmlAttributes = new { @class = "form-control" } })
                                                                    @Html.ValidationMessageFor(model => model.fiyat, "", new { @class = "text-danger" })
                                                                </div>
                                                            </div>

                                                            <div class="form-group hidden">
                                                                <label class="control-label col-md-2">Alış Fiyatı</label>
                                                                <div class="col-md-10">
                                                                    @Html.EditorFor(model => model.alisfiyati, new { htmlAttributes = new { @class = "form-control" } })
                                                                    @Html.ValidationMessageFor(model => model.alisfiyati, "", new { @class = "text-danger" })
                                                                </div>
                                                            </div>
                                                            <div class="form-group hidden">
                                                                @Html.LabelFor(model => model.urundurumu, htmlAttributes: new { @class = "control-label col-md-2" })
                                                                <div class="col-md-10">
                                                                    <select id="urundurumu" name="urundurumu" class="form-control">
                                                                        <option value="var" selected="selected">Stokta Var</option>
                                                                        <option value="Tükendi">Tükendi</option>
                                                                    </select>
                                                                    @Html.ValidationMessageFor(model => model.urundurumu, "", new { @class = "text-danger" })
                                                                </div>
                                                            </div>
                                                            <div class="form-group hidden">
                                                                <label class="control-label col-md-2">Adet</label>
                                                                <div class="col-md-10">
                                                                    @Html.EditorFor(model => model.adet, new { htmlAttributes = new { @class = "form-control" } })
                                                                    @Html.ValidationMessageFor(model => model.adet, "", new { @class = "text-danger" })
                                                                </div>
                                                            </div>

                                                            <div class="form-group hidden">
                                                                <label class="control-label col-md-2">Admin Açıklama</label>
                                                                <div class="col-md-10">
                                                                    @Html.EditorFor(model => model.adminaciklama, new { htmlAttributes = new { @class = "form-control" } })
                                                                    @Html.ValidationMessageFor(model => model.adminaciklama, "", new { @class = "text-danger" })
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <button class="btn btn-primary prevBtn pull-left" type="button">Önceki</button>
                                            <div class="btn btn-success nextBtn pull-right" onclick="sifirlahi()">Kaydet</div>
                                            <input type="submit" id="smt" class="btn btn-success hidden" name="submit" value="Kaydet" />
                                        </div>
                                    </div>
                                    <input type="hidden" name="chkler" id="chkler" value="" />
                                    <input type="hidden" name="imgexz" id="imgexz" value="" />
                                </form>
                            </div>
                            <div style="margin-top: 20px;">
                                <a href="/Admin/uruns/urun" class="btn btn-primary btn-sm">&larr; Ürün Listesine Dön</a>
                            </div>
                        </div>
                    </div>
                </div>
            </article>
        </div>
    </section>
</div>
<script type="text/x-jsrender" id="odejsrender">
    <h6 class="oxel-{{:Id}}">{{:adi}}</h6>
    <ul class="list-inline oxel1-{{:Id}}">
        {{if adetlimi}}
        {{for ozls}}
        <li class="alljobhere" style="margin-bottom:15px">
            <label class="conlab" for="chk-{{>Id}}">
                {{if durum == "true"}}
                <input type="checkbox" id="chk-{{>Id}}" checked="checked" value="true" style="display:none" /> {{>ozellik}}
                {{else}}
                <input type="checkbox" id="chk-{{>Id}}" style="display:none" value="false" /> {{>ozellik}}
                {{/if}}
            </label>
            <input type="text" name="adet" id="txt-{{>Id}}" class="form-control checkboxlar" value="{{>adet}}" style="width:60px" placeholder="Adet" />
        </li>
        {{/for}}
        {{else}}
        {{for ozls}}
        <li class="alljobhere" style="margin-bottom:15px">
            <label class="conlab" for="chk-{{>Id}}" style="padding-left:35px">
                {{if durum == "true"}}
                <input type="checkbox" id="chk-{{>Id}}" checked="checked" value="true" /> {{>ozellik}} <span class="checkmark selected cmark-{{>Id}}" onclick="tooglesi('{{>Id}}')"></span>
                {{else}}
                <input type="checkbox" id="chk-{{>Id}}" /> {{>ozellik}} <span class="checkmark cmark-{{>Id}}" onclick="tooglesi('{{>Id}}')"></span>
                {{/if}}
            </label>
        </li>
        {{/for}}
        {{/if}}
    </ul>
</script>
@section pagespecific {
    <script src="~/js/Sortable.js"></script>
    <link href="~/content/css/cropper.css" rel="stylesheet" />
    <link href="~/content/css/main.css" rel="stylesheet" />
    <script src="~/content/js/cropper.js"></script>
    <script src="~/content/js/main.js?u=4"></script>
    <script src="~/content/js/aaJsRender.js"></script>
    <script src="/Areas/Admin/Scripts/jquery.validate.min.js"></script>
    <script src="/Areas/Admin/Scripts/jquery.validate.unobtrusive.min.js"></script>
    <script src="/js/bootstrap-filestyle.min.js"></script>
    <script>
        $(document).ready(function () {
            $("#imgInp").filestyle({ buttonName: "btn-primary" });
        })
        function sifirlahi() {
            if ($(".v1").hasClass("btn-primary")) {
                            $("#beklex").removeClass("hidden");
           $.ajax({
               type: "GET",
               url: "/admin/uruns/sifirlah",
               data: "id=@Model.Id",
               dataType: "json",
               success: function (data) {
                   if ($(".v1").hasClass("btn-primary")) {
                       yollahazirla();
                   }
                   else {
                       alert("Vitrin 1 (v1) seçiniz");
                       drmd = false;
                   }

               }
           });
            }
            else {
                alert("Vitrin 1 (v1) seçiniz");
            }

        }
        function yollahazirla() {
            //nere v1 v2 si
            //ne resim, video
            if ($(".imge").length > 0) {
                var elmid = $(".imge").eq(0).attr("id").replace("f-", "");
                var nedir = "yok";
                if ($(".tv-" + elmid + ".v1.btn-primary").length > 0) {
                    nedir = "v1";
                }
                if ($(".tv-" + elmid + ".v2.btn-primary").length > 0) {
                    nedir = "v2";
                }
                if ($(".ty-" + elmid + ".kpk.btn-primary").length > 0) {
                    nedir = "kpk";
                }


                //var v1 = $(".tv-" + elmid + ".v1").hasClass("btn-primary");
                //var v2 = $(".tv-" + elmid + ".v2").hasClass("btn-primary");
                //var kpk = $(".ty-" + elmid + ".kpk").hasClass("btn-primary");

                nere = nedir;
                var ne = "";
                  if ($("#f-" + elmid + "").attr("src").indexOf("jpeg") || $("#f-" + elmid + "").attr("src").indexOf("jpg")) {
                        ne = "resim";
                    }
                    else {
                        ne = "video";
                    }
                    var data = $("#f-" + elmid + "").attr("src");
                    $("#idsid").val(@Model.Id);
                    $("#neresid").val(nere);
                    $("#nesid").val(ne);
                    $("#datasid").val(data);
                    setTimeout(function () {
                        $("#yla").click();
                    },1000)
            }

        }
        function tooglesi(a) {
			if($(".cmark-"+a).hasClass("selected"))
			{
				$(".cmark-"+a).removeClass("selected");
			}
			else
			{
				$(".cmark-"+a).addClass("selected");
			}
        }
        function kodkullan() {
            $.ajax({
                type: "GET",
                url: "/uruns/urunkodukullanidsiz/",
                data: "kod=" + $("#UrunKodu").val() + "&Id=" + "@Model.Id",
                dataType: "json",
                success: function (data) {
                    if (data != "ok") {
                        $("#kouyri").removeClass("hidden");
                    }
                    else {
                        $("#kouyri").addClass("hidden");
                    }
                }
            });
        }
        var iss = 0;
        $(document).ready(function () {
            setInterval(kodkullan, 5400);
            $('form').each(function () {
                if ($(this).data('validator'))
                    $(this).data('validator').settings.ignore = ".note-editor *";
            });
            var SelectedValue = $("#KategoriId option:selected").text();
            var vli = $("#KategoriId option:selected").val();
            $.ajax({
                type: "GET",
                url: "/uruns/filitregetir2",
                data: "id=" + vli + "&urnid=" + "@ViewContext.RouteData.Values["Id"].ToString()",
                dataType: "json",
                success: function (data) {
                    var postsTemplate = $.templates("#odejsrender");
                    var html = postsTemplate.render(data);
                    $(".buraga").html(html);
                }
            });
        })
    </script>
    <script>
        var ttt;
        function showimg(e) {
            ttt = e;
            $("#myModal").modal("show");
        }
        function readURL(input) {
            if (window.File && window.FileList && window.FileReader) {
                var files = event.target.files; //FileList object
                var output = document.getElementById("result");
                for (var i = 0; i < files.length; i++) {
                    var file = files[i];
                    if (file.type.match('image')) {
                        var picReader = new FileReader();
                        picReader.addEventListener("load", function (event) {
                            var picFile = event.target;
                            var div = document.createElement("li");
                            div.style.width = "100px";
                            div.style.verticalAlign = "top";
                            div.className = "thumbnail";
                            var sss = Math.floor(Math.random() * 600000) + 1;
                            div.innerHTML = "<a href='#jj'><img style='width:100%' id='f-" + sss + "' class='imge' onclick='showimg(\"m-" + sss + "\")' class='thumbnail imgx' id='dsi-" + sss + "' src='" + picFile.result + "'" + "title='" + file.name + "'/><img style='width:100px;height:100px;display:none' id='m-" + sss + "' onclick='showimg(\"m-" + sss + "\");' class='thumbnail imgx' src='" + picFile.result + "'" + "title='" + file.name + "'/></a><div class='srk'><i class='fa fa-crosshairs'></i></div><div class='btn-group-xs btn-group btn-group-vertical' style='position: absolute;left: -25px;bottom: 0;'><div class='tv-" + sss + " btn btn-success v1' onclick='$(\".v1\").removeClass(\"btn-primary\").addClass(\"btn-success\");$(this).removeClass(\"btn-success\").addClass(\"btn-primary\");$(\"#v1\").val(\"" + sss + "\")'>V1</div><div class='tv-" + sss + " btn btn-success v2' onclick='$(\".v2\").removeClass(\"btn-primary\").addClass(\"btn-success\");$(this).removeClass(\"btn-success\").addClass(\"btn-primary\");$(\"#v2\").val(\"" + sss + "\")'>V2</div><div onclick='$(\".kpk\").removeClass(\"btn-primary\").addClass(\"btn-warning\");$(this).removeClass(\"btn-warning\").addClass(\"btn-primary\");$(\"#kpk\").val(\"" + sss + "\")' class='btn btn-warning kpk ty-" + sss + "'>Kpk</div><div class='btn btn-danger btn-xs' onclick='$(this).parent().parent().remove()'>Sil</div></div>";
                            output.insertBefore(div, null);
                        });
                        picReader.readAsDataURL(file);
                    }
                    if (file.type.match('video')) {
                        var reader = new FileReader();
                        reader.addEventListener("load", function (event) {
                            var picFile = event.target;
                            var div = document.createElement("li");
                            div.style.width = "100px";
                            div.style.verticalAlign = "top";
                            div.className = "thumbnail";
                            var sss = Math.floor(Math.random() * 600000) + 1;
                            div.innerHTML = "<a href='#jj'><video controls style='width:100%' id='f-" + sss + "' class='imge' onclick='showimg(\"m-" + sss + "\")' class='thumbnail imgx' id='dsi-" + sss + "' src='" + picFile.result + "'" + "title='" + file.name + "'/></video></a><div class='srk'><i class='fa fa-crosshairs'></i></div><div class='btn-group-xs btn-group btn-group-vertical' style='position: absolute;left: -25px;bottom: 0;'><div class='tv-" + sss + " btn btn-success v1' onclick='$(\".v1\").removeClass(\"btn-primary\").addClass(\"btn-success\");$(this).removeClass(\"btn-success\").addClass(\"btn-primary\");$(\"#v1\").val(\"" + sss + "\")'>V1</div><div class='tv-" + sss + " btn btn-success v2' onclick='$(\".v2\").removeClass(\"btn-primary\").addClass(\"btn-success\");$(this).removeClass(\"btn-success\").addClass(\"btn-primary\");$(\"#v2\").val(\"" + sss + "\")'>V2</div><div onclick='$(\".kpk\").removeClass(\"btn-primary\").addClass(\"btn-warning\");$(this).removeClass(\"btn-warning\").addClass(\"btn-primary\");$(\"#kpk\").val(\"" + sss + "\")' class='btn btn-warning kpk ty-" + sss + "'>Kpk</div><div class='btn btn-danger btn-xs' onclick='$(this).parent().parent().remove()'>Sil</div></div>";
                            output.insertBefore(div, null);
                        });
                        reader.readAsDataURL(file);
                    }
                }
            }
            else {
                console.log("Your browser does not support File API");
            }
            $("#imgInp").replaceWith($("#imgInp").val('').clone(true));
        }

        $("#imgInp").on("change", function (e) {
            readURL(e.target.files);
        });

        $(document).ready(function () {
            new Sortable(document.getElementById('result'), {
                animation: 150,
                onSort: function (evt) {

                }
            });

            $('#myModal').on('shown.bs.modal', function (e) {
                $("#image").cropper("replace", $("#" + ttt).attr("src"));
                $("#" + ttt.replace("s", "d")).val($("#image").cropper("getData"));
                $('#image').cropper('setAspectRatio', 0.6666666666666666)
            })
            $('#KategoriId').change(function () {
                var SelectedValue = $("#KategoriId option:selected").text();//
                var vli = $(this).val();
                $.ajax({
                    type: "GET",
                    url: "/uruns/filitregetir",
                    data: "id=" + vli,
                    dataType: "json",
                    success: function (data) {
                        var postsTemplate = $.templates("#odejsrender");
                        var html = postsTemplate.render(data);
                        $(".buraga").html(html);
                        $(".ikide").click();
                    }
                });
            });
            var navListItems = $('div.setup-panel div a'),
                allWells = $('.setup-content'),
                allNextBtn = $('.nextBtn'),
                allPrevBtn = $('.prevBtn');

            allWells.hide();
            navListItems.click(function (e) {
                e.preventDefault();
                var $target = $($(this).attr('href')),
                    $item = $(this);
                if (!$item.hasClass('disabled')) {
                    navListItems.removeClass('btn-primary').addClass('btn-default');
                    $item.addClass('btn-primary');
                    allWells.hide();
                    $target.show();
                    $target.find('input:eq(0)').focus();
                }
            });

            allPrevBtn.click(function () {
                var curStep = $(this).closest(".setup-content"),
                    curStepBtn = curStep.attr("id"),
                    prevStepWizard = $('div.setup-panel div a[href="#' + curStepBtn + '"]').parent().prev().children("a");

                prevStepWizard.removeAttr('disabled').trigger('click');
            });

            allNextBtn.click(function () {
                var curStep = $(this).closest(".setup-content"),
                    curStepBtn = curStep.attr("id"),
                    nextStepWizard = $('div.setup-panel div a[href="#' + curStepBtn + '"]').parent().next().children("a"),
                    curInputs = curStep.find("input[type='text'],input[type='url']"),
                    isValid = true;

                $(".form-group").removeClass("has-error");
                for (var i = 0; i < curInputs.length; i++) {
                    if (!curInputs[i].validity.valid) {
                        isValid = false;
                        $(curInputs[i]).closest(".form-group").addClass("has-error");
                    }
                }
                if (isValid)
                    nextStepWizard.removeAttr('disabled').trigger('click');
            });

            $('div.setup-panel div a.btn-primary').trigger('click');
        });

        $(document).ready(function () {
            $("#KategoriId").select2({
                language: "tr",
                placeholder: "Kategori Seçiniz"
            });
            $("#FilitreId").select2({
                language: "tr",
                placeholder: "Filitre Seçiniz"
            });

        })
    </script>
    <script>
        function sendFile(file, el) {
            var form_data = new FormData();
            form_data.append('file', file);
            $.ajax({
                data: form_data,
                type: "POST",
                url: "/Admin/Uruns/attachment_uploadurun",
                cache: false,
                contentType: false,
                processData: false,
                success: function (url) {
                    $(el).summernote('editor.insertImage', "/UrunResimleri/" + url);
                }
            });
        }
        var $ccr;
        $(document).ready(function () {
            $('#summernote').summernote({
                callbacks: {
                    // Clear all formatting of the pasted text
                    onPaste: function (e) {
                        var bufferText = ((e.originalEvent || e).clipboardData || window.clipboardData).getData('Text');
                        e.preventDefault();
                        setTimeout(function () {
                            document.execCommand('insertText', false, bufferText);
                        }, 10);
                    },
                    onImageUpload: function (files, editor, welEditable) {

                        for (var i = files.length - 1; i >= 0; i--) {
                            sendFile(files[i], this);
                        }
                    }
                },
                minHeight: 300,
                maxHeight: null,
                focus: true,
                lang: 'tr-TR',
                toolbar: [
                    ['style', ['link', 'style', 'bold', 'italic', 'underline', 'clear']],
                    ['color', ['color']],
                    ['para', ['ul', 'ol', 'paragraph']],
                    ['height', ['height', 'fullscreen', 'undo', 'redo', 'picture']]
                ]
            });
            $("#summernote").summernote("code", $("#urundetayi").val());
        })
    </script>
    <script type="text/javascript">
        function yolla() {

            var chkler = "";

            $(".alljobhere label").each(function (ind, arr) {
                var status = $(this).find(".checkmark").hasClass("selected") ? "true" : "false";
                var adet = $(this).parent().find("input[type='text']").val();
                if (adet != "" && adet != "0" && adet != "undefined" && typeof wlocation !== "undefined" && adet != undefined) {
                    status = "true";
                }
                var filitreid = $(this).parent().parent().attr("class").replace("list-inline oxel1-", "");
                var ozellikid = $(this).attr("for").replace("chk-", "");
                if (adet != "" && adet != "0") {
                    chkler += "," + status + "-" + filitreid + "-" + ozellikid + "-" + adet;
                }
            });

            if (chkler != "") {
                $("#chkler").val(chkler.substr(1));
            }

            var imgler = "";
            if ($('.imge').length > 0) {
                $('.imge').each(function (ind, arr) {
                    var idsi = $(this).attr("id");
                    imgler += "ayirbuber[" + idsi + "]" + "{ahmet}" + $(this).attr("src");
                });
            }

            $('#imgexz').val(imgler.substr(9));

            $("#Icerik").val(escape($('#summernote').summernote('code')));
            var atLeastOneIsChecked = $('input[name="aktifi"]:checked').length > 0;

            if (atLeastOneIsChecked) {
                $('input[name="aktif"]').prop('checked', true);
                $('input[name="aktif"]').val("true");
            }
            else {
                $('input[name="aktif"]').prop('checked', false);
                $('input[name="aktif"]').val('false');
            }

            $("#urundetayi").val(escape($('#summernote').summernote('code')));
            var drmd = true;
            //if ($(".v1").hasClass("btn-primary")) {

            //}
            //else {
            //    alert("Vitrin 1 (v1) resmi seçiniz");
            //    drmd = false;
            //}

            if (drmd) {
                if ($("#kouyri").hasClass("hidden")) {
                    $("#smt").click();
                }
                else {
                    alert("Ürün Kodu Benzeşmesi var");
                }
            }
        }
    </script>

    <script src="~/Scripts/jquery.unobtrusive-ajax.js"></script>
    <script type="text/javascript">
        function OnSuccess(response) {
            try {
                var elmid = $(".imge").eq(0).attr("id").replace("f-", "");
                $("#f-" + elmid + "").parent().parent().remove();
            } catch (e) {

            }
            setTimeout(function () {
                if ($(".imge").length > 0) {
                    //

                    setTimeout(function () {
                        yollahazirla();
                    }, 1000)

                }
                else {
                    setTimeout(yolla, 1000);
                }
            }, 400)

        }
        function OnFailure(response) {
            alert("Error occured.");
        }
    </script>
}


<style>
    .modal-open {
        overflow: hidden;
    }

    .modal {
        display: none;
        overflow: hidden;
        position: fixed;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        z-index: 1050;
        -webkit-overflow-scrolling: touch;
        outline: 0;
    }

        .modal.fade .modal-dialog {
            -webkit-transform: translate(0, -25%);
            -ms-transform: translate(0, -25%);
            -o-transform: translate(0, -25%);
            transform: translate(0, -25%);
            -webkit-transition: -webkit-transform 0.3s ease-out;
            -o-transition: -o-transform 0.3s ease-out;
            transition: transform 0.3s ease-out;
        }

        .modal.in .modal-dialog {
            -webkit-transform: translate(0, 0);
            -ms-transform: translate(0, 0);
            -o-transform: translate(0, 0);
            transform: translate(0, 0);
        }

    .modal-open .modal {
        overflow-x: hidden;
        overflow-y: auto;
    }

    .modal-dialog {
        position: relative;
        width: auto;
        margin: 10px;
    }

    .modal-content {
        position: relative;
        background-color: #ffffff;
        border: 1px solid #999999;
        border: 1px solid rgba(0, 0, 0, 0.2);
        border-radius: 6px;
        -webkit-box-shadow: 0 3px 9px rgba(0, 0, 0, 0.5);
        box-shadow: 0 3px 9px rgba(0, 0, 0, 0.5);
        -webkit-background-clip: padding-box;
        background-clip: padding-box;
        outline: 0;
    }

    .modal-dialog {
        width: 100% !important;
        height: 100% !important;
        margin: 0;
        padding: 0;
        margin-top: 0 !important;
    }

    .modal-content {
        height: auto;
        min-height: 100%;
        border-radius: 0;
    }

    .modal-backdrop {
        position: fixed;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        z-index: 1040;
        background-color: #000000;
    }

        .modal-backdrop.fade {
            opacity: 0;
            filter: alpha(opacity=0);
        }

        .modal-backdrop.in {
            opacity: 0.5;
            filter: alpha(opacity=50);
        }

    .modal-header {
        padding: 15px;
        border-bottom: 1px solid #e5e5e5;
    }

        .modal-header .close {
            margin-top: -2px;
        }

    .modal-title {
        margin: 0;
        line-height: 1.42857143;
    }

    .modal-body {
        position: relative;
        padding: 8px 30px;
    }

    .modal-footer {
        padding: 15px;
        text-align: right;
        border-top: 1px solid #e5e5e5;
    }

        .modal-footer .btn + .btn {
            margin-left: 5px;
            margin-bottom: 0;
        }

        .modal-footer .btn-group .btn + .btn {
            margin-left: -1px;
        }

        .modal-footer .btn-block + .btn-block {
            margin-left: 0;
        }

    .modal-scrollbar-measure {
        position: absolute;
        top: -9999px;
        width: 50px;
        height: 50px;
        overflow: scroll;
    }

    @@media (min-width: 768px) {
        .modal-dialog {
            width: 600px;
            margin: 30px auto;
        }

        .modal-content {
            -webkit-box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
        }

        .modal-sm {
            width: 300px;
        }
    }

    .modal {
        padding-right: 0 !important;
    }

    @@media (min-width: 992px) {
        .modal-lg {
            width: 900px;
        }
    }

    button.btn-default {
        background: white !important;
    }
</style>





@using (Ajax.BeginForm("resimlerial", "uruns", new AjaxOptions { OnSuccess = "OnSuccess", OnFailure = "OnFailure", LoadingElementId = "progress" }))
{
    @Html.AntiForgeryToken()
    <input type="hidden" name="id" id="idsid" value="" />
    <input type="hidden" name="nere" id="neresid" value="" />
    <input type="hidden" name="ne" id="nesid" value="" />
    <input type="hidden" name="data" id="datasid" value="" />
    <input type="submit" id="yla" class="hidden" value="Submit" />
}





<div id="progress" style="display:none" class="modal">
    <div class="center">

    </div>
</div>